package me.EthanBilbrey.MobsMultiplyOnSight;

import java.util.List;

import org.bukkit.Bukkit;
import org.bukkit.entity.Entity;
import org.bukkit.entity.Player;
import org.bukkit.util.Vector;

public class PlayerTracker 
{
	private Player p;
	private int taskId;
	
	public PlayerTracker(Player p) 
	{
		this.p = p;
	}
	private void startTracking() 
	{
		taskId = Bukkit.getScheduler().scheduleSyncRepeatingTask(Main.getPlugin(Main.class), () -> {
			List<Entity> entities = p.getNearbyEntities(10, 10, 10);
			Vector dir = p.getLocation().getDirection();
			for(Entity e : entities) 
			{
				Vector dirToEnt = p.getLocation().subtract(e.getLocation()).toVector();
				if(dir.equals(dirToEnt)) 
				{
					p.getWorld().spawnEntity(e.getLocation(), e.getType());
				}
			}
		}, 0L, 10L);
	}
}
